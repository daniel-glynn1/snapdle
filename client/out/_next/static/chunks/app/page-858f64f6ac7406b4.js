(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6623:function(e,t,r){Promise.resolve().then(r.bind(r,9315))},9315:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var a=r(7437),s=r(2265);function l(){let[e,t]=(0,s.useState)(null),[r,l]=(0,s.useState)(null),[o,n]=(0,s.useState)(""),[d,c]=(0,s.useState)([]),[i,h]=(0,s.useState)([]),[b,u]=(0,s.useState)(""),[p,g]=(0,s.useState)(!1),[m,x]=(0,s.useState)([]),[N,w]=(0,s.useState)(!1),[y,S]=(0,s.useState)(!1),[j,f]=(0,s.useState)(!1),[k,D]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{fetch("/api/dailycard").then(e=>e.json()).then(e=>t(e)).catch(e=>console.error("Error fetching daily card:",e)),fetch("/api/cards").then(e=>e.json()).then(e=>h(e.map(e=>e.Name))).catch(e=>console.error("Error fetching card options:",e));let e=JSON.parse(localStorage.getItem("localDailyCard"));e&&l(e);let r=JSON.parse(localStorage.getItem("guessedCards"));r&&c(r);let a=JSON.parse(localStorage.getItem("gameOver"));a&&f(a);let s=JSON.parse(localStorage.getItem("win"));s&&D(s);let o=JSON.parse(localStorage.getItem("hintOption"));o&&S(o);let n=JSON.parse(localStorage.getItem("showHint"));n&&S(n);let d=JSON.parse(localStorage.getItem("easyMode"));d&&E(d)},[]),(0,s.useEffect)(()=>{localStorage.setItem("guessedCards",JSON.stringify(d)),localStorage.setItem("gameOver",JSON.stringify(j)),localStorage.setItem("win",JSON.stringify(k)),localStorage.setItem("hintOption",JSON.stringify(y)),localStorage.setItem("showHint",JSON.stringify(N))},[d,j,k,y,N]),(0,s.useEffect)(()=>{e&&r&&e.Name!==r.Name&&T(),e&&localStorage.setItem("localDailyCard",JSON.stringify(e))},[e,r]);let A=async t=>{if(t.preventDefault(),!e){O("Error: Lost connection to server.");return}if(!i.some(e=>e.toLowerCase()===o.toLowerCase())){O("Not a valid card"),n("");return}if(d.some(e=>e.Name.toLowerCase()===o.toLowerCase())){O("You already guessed that card"),n("");return}try{let t=await fetch("".concat("http://localhost:5050","/api/card?name=").concat(o)),r=await t.json();c([...d,r]),n(""),r.Name===e.Name?(f(!0),D(!0)):d.length>=7?(f(!0),D(!1)):d.length>=5&&S(!0)}catch(e){console.error("Error fetching guessed card:",e),O("Error fetching guessed card. Please try again.")}},M=e=>{n(e),x([])},R=()=>{w(!N)},v=()=>{let t="Snapdle ";for(let r of(t+=new Date(e.Date).toLocaleDateString("en-us",{year:"numeric",month:"numeric",day:"numeric"})+": "+d.length+"/8\n",d))t+=(r.Name===e.Name?"\uD83D\uDFE9":C&&r.Name.slice(0,1)===e.Name.slice(0,1)?"\uD83D\uDFE8":"⬜")+(r.Cost===e.Cost?"\uD83D\uDFE9":C&&1===Math.abs(r.Cost-e.Cost)?"\uD83D\uDFE8":"⬜")+(r.Power===e.Power?"\uD83D\uDFE9":C&&1===Math.abs(r.Power-e.Power)?"\uD83D\uDFE8":"⬜")+(r.SeriesAdjusted===e.SeriesAdjusted?"\uD83D\uDFE9":C&&1===Math.abs(r.SeriesAdjusted-e.SeriesAdjusted)?"\uD83D\uDFE8":"⬜")+(e.AbilityType.includes(r.AbilityType)||r.AbilityType.includes(e.AbilityType)?"\uD83D\uDFE9":"⬜")+(r.ReleaseMonth===e.ReleaseMonth?"\uD83D\uDFE9":C&&1===Math.abs(r.ReleaseMonth-e.ReleaseMonth)?"\uD83D\uDFE8":"⬜")+(r.ReleaseYear===e.ReleaseYear?"\uD83D\uDFE9":C&&1===Math.abs(r.ReleaseYear-e.ReleaseYear)?"\uD83D\uDFE8":"⬜")+"\n";N&&(t+="(hint used)"),t+="https://snap-dle.onrender.com/",navigator.clipboard.writeText(t),O("Results copied to clipboard")},O=e=>{u(e),g(!0),setTimeout(()=>{g(!1)},3e3)},T=()=>{c([]),f(!1),D(!1),S(!1),w(!1)};return(0,a.jsxs)("div",{className:"flex flex-col content-center text-center px-2",children:[(0,a.jsx)("h1",{className:"text-2xl mt-10",children:"Guess the Marvel Snap Card!"}),e&&(0,a.jsxs)("div",{children:[y&&!j&&!N&&(0,a.jsx)("button",{disabled:!e||N,onClick:()=>R(),className:"bg-blue-600 text-white px-4 py-2 mt-2 rounded",children:"Hint: Ability Text"}),N&&!j&&(0,a.jsx)("div",{className:"dark:bg-neutral-600 bg-neutral-300 px-2 py-2 mt-2 rounded ",children:(0,a.jsxs)("p",{children:["Ability: ",e.AbilityText]})}),j?(0,a.jsx)("div",{className:"".concat(k?N?"bg-yellow-500":"bg-green-500":"bg-red-500"," text-white px-4 py-2 rounded shadow-md mt-4 z-50"),children:k?N?(0,a.jsxs)("p",{children:["Correct. You guessed ",(0,a.jsx)("em",{className:"font-bold text-yellow-800",children:e.Name})," in ",d.length," guesses (with a hint)"]}):(0,a.jsxs)("p",{children:["Nice! You guessed ",(0,a.jsx)("em",{className:"font-bold text-green-800",children:e.Name})," in ",d.length," guess",d.length>1&&"es"]}):(0,a.jsxs)("p",{children:["Unlucky, today's card was ",(0,a.jsx)("em",{className:"font-bold text-red-900",children:e.Name})]})}):(0,a.jsxs)("form",{onSubmit:A,className:"mt-2 flex",children:[(0,a.jsx)("input",{type:"text",value:o,onChange:e=>{let t=e.target.value.toLowerCase();n(t);let r=i.filter(e=>e.toLowerCase().includes(t));r.sort((e,r)=>e.toLowerCase().startsWith(t)&&!r.toLowerCase().startsWith(t)?-1:!e.toLowerCase().startsWith(t)&&r.toLowerCase().startsWith(t)?1:0),x(r)},className:"grow border rounded p-2 mr-2",placeholder:"Enter your guess"}),(0,a.jsx)("button",{type:"submit",disabled:!e,className:"text-white rounded p-2 bg-blue-600",children:"Guess ".concat(d.length+1," / ").concat(8)})]}),m.length>0&&(0,a.jsx)("ul",{className:"border border-neutral-600 rounded mt-1 w-full max-h-48 overflow-y-auto",children:m.map(e=>(0,a.jsx)("li",{onClick:()=>M(e),className:"p-2 cursor-pointer hover:bg-neutral-200 hover:text-black",children:e},e))}),p&&(0,a.jsx)("div",{className:"fixed top-0 left-1/2 transform -translate-x-1/2 bg-purple-800 text-white px-4 py-2 rounded shadow-md mt-4 z-50",children:b}),(0,a.jsxs)("table",{className:"mt-2 w-full border-collapse border dark:border-black border-white text-[10px] table-auto",children:[(0,a.jsx)("thead",{className:"text-white",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"border dark:border-black border-white bg-purple-700 p-[2px] h-8",children:"Name"}),(0,a.jsx)("th",{className:"border dark:border-black border-white bg-purple-700 p-[2px] h-8",children:"Cost"}),(0,a.jsx)("th",{className:"border dark:border-black border-white bg-purple-700 p-[2px] h-8",children:"Power"}),(0,a.jsx)("th",{className:"border dark:border-black border-white bg-purple-700 p-[2px] h-8",children:"Series"}),(0,a.jsx)("th",{className:"border dark:border-black border-white bg-purple-700 p-[2px] h-8",children:"Ability Type"}),(0,a.jsx)("th",{className:"border dark:border-black border-white bg-purple-700 p-[2px] h-8",children:"Release Month"}),(0,a.jsx)("th",{className:"border dark:border-black border-white bg-purple-700 p-[2px] h-8",children:"Release Year"})]})}),(0,a.jsx)("tbody",{children:d.map((t,r)=>(0,a.jsxs)("tr",{className:"text-center",children:[(0,a.jsx)("td",{className:"border dark:border-black border-white p-[2px] h-10 text-ellipsis \n                ".concat(t.Name===e.Name?"bg-green-500":C&&t.Name.slice(0,1)===e.Name.slice(0,1)?"bg-yellow-500":"dark:bg-neutral-800 bg-neutral-200"),children:t.Name}),(0,a.jsx)("td",{className:"border dark:border-black border-white p-[2px] h-10 \n                ".concat(t.Cost===e.Cost?"bg-green-500":C&&1===Math.abs(t.Cost-e.Cost)?"bg-yellow-500":"dark:bg-neutral-800 bg-neutral-200"),children:t.Cost}),(0,a.jsx)("td",{className:"border dark:border-black border-white p-[2px] h-10 \n                ".concat(t.Power===e.Power?"bg-green-500":C&&1===Math.abs(t.Power-e.Power)?"bg-yellow-500":"dark:bg-neutral-800 bg-neutral-200"),children:t.Power}),(0,a.jsx)("td",{className:"border dark:border-black border-white p-[2px] h-10 \n                ".concat(t.SeriesAdjusted===e.SeriesAdjusted?"bg-green-500":C&&1===Math.abs(t.SeriesAdjusted-e.SeriesAdjusted)?"bg-yellow-500":"dark:bg-neutral-800 bg-neutral-200"),children:t.SeriesAdjusted}),(0,a.jsx)("td",{className:"border dark:border-black border-white p-[2px] h-10 \n                ".concat(e.AbilityType.includes(t.AbilityType)||t.AbilityType.includes(e.AbilityType)?"bg-green-500":"dark:bg-neutral-800 bg-neutral-200"),children:t.AbilityType}),(0,a.jsx)("td",{className:"border dark:border-black border-white p-[2px] h-10 \n                ".concat(t.ReleaseMonth===e.ReleaseMonth?"bg-green-500":C&&1===Math.abs(t.ReleaseMonth-e.ReleaseMonth)?"bg-yellow-500":"dark:bg-neutral-800 bg-neutral-200"),children:t.ReleaseMonth}),(0,a.jsx)("td",{className:"border dark:border-black border-white p-[2px] h-10 \n                ".concat(t.ReleaseYear===e.ReleaseYear?"bg-green-500":C&&1===Math.abs(t.ReleaseYear-e.ReleaseYear)?"bg-yellow-500":"dark:bg-neutral-800 bg-neutral-200"),children:t.ReleaseYear})]},r))})]}),j&&(0,a.jsx)("button",{onClick:()=>v(),className:"bg-purple-700 text-white w-full py-2 mt-2 rounded",children:"Share"})]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6623)}),_N_E=e.O()}]);